"use strict";(self.webpackChunkwords_to_kick_your_teeth_out=self.webpackChunkwords_to_kick_your_teeth_out||[]).push([[448],{5448:function(e,n,t){t.r(n),t.d(n,{default:function(){return x}});var r=t(5026),l=t(9934),s=t(6540),o=t(6126),c=t(4848);const i=e=>{let{url:n,display_name:t,acct:r}=e;const l=""!==t?t:r;return(0,c.jsx)("address",{children:(0,c.jsx)(o.A,{rel:"nofollow",href:n,children:l})})},d=e=>{let{url:n,account:t,content:r,children:l}=e;const d=(e=>(0,s.useMemo)((()=>(e=>`<!DOCTYPE html>\n<html>\n  <head>\n    <base target="_parent">\n    <meta name="color-scheme" content="dark light">\n    <link rel="stylesheet" href="/sandbox.css">\n  </head>\n  <body>${e}</body>\n</html>`)(e)),[e]))(r),{0:a,1:u}=(0,s.useState)(!1),m=(0,s.useCallback)((e=>{u(!0)}),[]),h=a?"comment-module--loaded--961c0":"comment-module--unloaded--35fb3";return(0,c.jsxs)("article",{className:"comment-module--comment--13767",children:[(0,c.jsxs)("header",{className:"comment-module--header--3b239",children:[(0,c.jsx)(i,{...t}),(0,c.jsx)(o.A,{rel:"nofollow",href:n,children:"#"})]}),(0,c.jsx)("iframe",{className:"comment-module--iframe--0ce46 "+h,allow:"",sandbox:"allow-top-navigation-by-user-activation",srcDoc:d,onLoad:m}),(0,c.jsx)("div",{children:l})]})};const a=e=>{let{children:n}=e;return(0,c.jsx)("div",{className:"comment-list-module--list--556f9",children:n})},u=e=>{let{children:n}=e;return(0,c.jsx)("div",{className:"comment-list-module--item--9f430",children:n})},m=e=>{let{id:n,url:t,content:r,account:l}=e;return[n,{url:t,account:l,content:r}]};function h(e){let{id:n,account:t,url:r,content:l,replies:s}=e;return(0,c.jsx)(d,{account:t,url:r,content:l,children:(0,c.jsx)(a,{children:s.map((e=>(0,c.jsx)(u,{children:(0,c.jsx)(h,{...e})},e.id)))})})}const f=e=>{let{host:n,id:t}=e;const{0:r,1:l}=(0,s.useState)(null);return(0,s.useEffect)((()=>{let e=!1;return(async r=>{const s=new Request(new URL(`/api/v1/statuses/${t}/context`,`https://${n}`)),o=await fetch(s);if(!o.ok)throw new Error(`${o.status} ${o.statusText}`);if(e)return;const c=await o.json();if(e)return;const i=null!==(r=null==c?void 0:c.descendants)&&void 0!==r?r:null,d=(e=>e?new Map(e.map(m)):null)(i),a=(e=>{if(!e)return null;const n=new Map(e.map((e=>[e.in_reply_to_id,[]])));for(const{in_reply_to_id:t,id:r}of e)n.get(t).push(r);return n})(i),u=(e=>{var n;let{id:t,comments:r,replies:l}=e;return(null!==(n=l.get(t))&&void 0!==n?n:[]).map((function e(n){var t;return{id:n,...r.get(n),replies:(null!==(t=l.get(n))&&void 0!==t?t:[]).map(e)}}))})({id:t,comments:d,replies:a});l(u)})(),()=>e=!0}),[n,t]),r?(0,c.jsx)(a,{children:r.map((e=>(0,c.jsx)(u,{children:(0,c.jsx)(h,{...e})},e.id)))}):"Loading..."};var x=e=>{let{host:n,id:t}=e;return(0,c.jsx)(r.w,{heading:(0,c.jsx)(l.Ys,{id:"comments",children:"Comments"}),children:(0,c.jsx)(f,{host:n,id:t})})}},5026:function(e,n,t){t.d(n,{w:function(){return o}});var r=t(6540),l=t(3422),s=t(4848);const o=e=>{let{children:n,heading:t,...o}=e;const c=(0,r.useId)();return(0,s.jsx)("section",{"aria-labelledby":c,...o,children:(0,s.jsxs)(l.Z,{children:[(0,s.jsx)("header",{id:c,children:(0,s.jsx)("hgroup",{children:t})}),n]})})}}}]);
//# sourceMappingURL=448-b1b24cf43b2effa7961f.js.map